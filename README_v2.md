# 参考来源

[官方文档](https://bbs.nga.cn/read.php?tid=6406100&authorid=58)

# 通用

## 域名

NGA有三个域名，其功能相同，如果有一个故障可以尝试其他的

- https://ngabbs.com/ (app复制的链接会给这个)
- https://bbs.nga.cn/ (主站)
- https://nga.178.com/ (备用)

## API

NGA的接口API地址均为在域名后加`*.php`，除上传以外有如下API：

- `thread.php`：查询主题
- `read.php` ：查询主题内容
- `forum.php`：版面操作
- `post.php`：发帖操作
- `nuke.php`：其他操作

## 请求方法和传参方式

部分接口要求为POST，部分可以用GET，建议统一用POST。

所有参数均可以使用`QueryString`和`Forum-Data`方式传递，鉴于`QueryString`有长度限制，建议把正文之类的字段放到`Form-Data`中传递，可以二者都传，会合并识别。



`axios`的参考方案，在配置对象中使用如下字段，此时`data`字段的内容即被作为`Form-Data`传递

```js
headers:{'Content-Type': 'application/x-www-form-urlencoded'},
transformRequest:[
    function (data) {
        let ret = ''
        for (let it in data) {
            ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&'
        }
        ret = ret.substring(0, ret.lastIndexOf('&'));
        return ret
    }
],
```



传入参数`__inchst=UTF8` 可以在传参时使用UTF-8编码，建议无脑使用；注意：它不影响响应编码，GBK依然需要解码。

## User-Agent

将header中的`User-Agent`字段设置为`NGA_WP_JW`，可以拿到更多信息，如用户信息中的部分字段，非该值时是拿不到数据的。

## 输出格式

传入`__output` 参数，可指定返回的数据格式，原文介绍了多种参数值，常用的仅为：

- `8`：`GBK`编码返回`json`数据
- `11`：`UTF-8`编码返回`json`数据

注意：

- `11`在以前会有概率出现乱码，但是似乎已经修复，如果测试没有问题建议直接使用`11`；`post.php`不能使用`11`
- `8`在解码时建议使用`GB18030`字符集，否则部分繁体字可能无法正确解码。

`axios`的解码方案参考：

```js
responseType: 'blob',
transformResponse: [function (data) {
        let reader = new FileReader();
        reader.readAsText(data, 'GBK');
        return new Promise(resolve => {
            reader.onload = function () {
                let result = reader.result;           
                resolve(JSON.parse(result))
            }
        });
    }]
```

## JSON格式不严谨的情况

1. 回复对象的`alterinfo`字段中会出现`\t`字符，会导致解析报错；同时私信的参与用户列表字段也将它作为分隔符使用；因此不能简单地删除所有`\t`字符，建议的处理方法是先替换为其他字符，解析为JSON之后再分别处理。
2. 个别字段以数字而不是"数字"作为字段名，可能导致解析报错；版面数据的`custom_level`字段以JSON字符串保存数据，字段名也没有带引号；可以使用这个正则表达式`([,{ ])(\\w+?):`（注意空格不能删），将其替换为`$1\"$2\":`来添加引号。
3. 个别字段可能出现有时为数组，有时为对象(以数字为字段名)的情况，因此遍历时需要采取一些通用方式。

## 时间戳

所有使用时间戳的地方，均使用的为`UNIX时间戳`，单位为“秒”。在JS中可以使用`new Date(timestamp*1000)`转换为`Date`对象

## 匿名唯一标识转换为对应中文乱码的方法

从官方文件 [js_commonui.js](https://img4.nga.178.com/common_res/js_commonui.js) 中获知 ，可搜索 “甲乙丙丁”

略微修改如下:

```js
const t1 = "甲乙丙丁戊己庚辛壬癸子丑寅卯辰巳午未申酉戌亥"
const t2 = '王李张刘陈杨黄吴赵周徐孙马朱胡林郭何高罗郑梁谢宋唐许邓冯韩曹曾彭萧蔡潘田董袁于余叶蒋杜苏魏程吕丁沈任姚卢傅钟姜崔谭廖范汪陆金石戴贾韦夏邱方侯邹熊孟秦白江阎薛尹段雷黎史龙陶贺顾毛郝龚邵万钱严赖覃洪武莫孔汤向常温康施文牛樊葛邢安齐易乔伍庞颜倪庄聂章鲁岳翟殷詹申欧耿关兰焦俞左柳甘祝包宁尚符舒阮柯纪梅童凌毕单季裴霍涂成苗谷盛曲翁冉骆蓝路游辛靳管柴蒙鲍华喻祁蒲房滕屈饶解牟艾尤阳时穆农司卓古吉缪简车项连芦麦褚娄窦戚岑景党宫费卜冷晏席卫米柏宗瞿桂全佟应臧闵苟邬边卞姬师和仇栾隋商刁沙荣巫寇桑郎甄丛仲虞敖巩明佘池查麻苑迟邝'

export const getAnonyName = (name) => {
    let i = 6;

    let s = ""
    for (let j = 0; j < 6; j++) {
        if (j === 0 || j === 3)
            s += t1.charAt(('0x0' + name.substr(i + 1, 1)) - 0)
        else if (j < 6)
            s += t2.charAt(('0x' + name.substr(i, 2)) - 0)
        i += 2
    }
    return s
}


// #anony_8905635a3dc3a79511fc6217423df746 --> 壬柯顾己蓝应
```

## 官方表情包

可以通过请求[这个JS文件](https://img4.nga.178.com/common_res/js_bbscode_core.js)获得，其中的`ubbcode.smiles`对象即为表情数据，第一层级的key为表情分组名称，分组内的key为表情名称，value为对应的图片名称；分组内的key`_______name`为该分组的中文名。

正文中引用表情的格式为：`[s:组名称:表情名称]`， 对应的图片绝对路径为在图片名称前添加前缀：`https://img4.nga.178.com/ngabbs/post/smile/`

## 标题字体数据的解析方法

原始数据来自主题数据的`topic_misc`字段，参考官方文档`2.5.2`章节

`JS`的参考实现：

```js
export const parseTitleFont = (data) => {
    //将字串使用base64解码，并切割为单字节数组
    const s = window.atob(data).split("");
    //将各字节转换为8位二进制数组（补齐位数）
    const array = s
        .map(i => bin2UInt(i).toString(2))
        .map(i => ('00000000' + i).slice(-8));
    const res = {}
    //以5为步长循环该数组（如果为合集主题array长度为10，否则为5）
    for (let i = 0; i < array.length - 1; i += 5) {
        //首字节表示数据类型
        const type = parseInt(array[i], 2) === 2 ? "stid" : 'bit'
        //将后续4个字节数据拼接并转换为十进制数
        let bit = parseInt(array.slice(i + 1, i + 5).join(''), 2)
        if (type === 'stid') {
            //如果数据类型为1 ， 表示bit为集合id
            res.stid = bit;
        }
        if (type === 'bit') {
            //如果是字体数据，把数据转换为2进制字符串，并反向方便后续处理
            res.titleFont = bit.toString(2).split("").reverse().join('')
        }
    }
    return res
}

//二进制字符串转为多字节整数(big-endian)
export const bin2UInt = (x) => {
    let z = 0, y = 0;
    for (let i = 0; i < x.length; i++) {
        y = x.charCodeAt(i)
        //如果输入字符串中有utf16字符则一次移动两字节
        z = (z << (y > 255 ? 16 : 8)) + y
    }
    return z
}

```

最终返回的 `res.titleFont` 为由01组成的字符串，根据每一位的值为 0（否） ，1（是），决定主题字体的格式，位数不存在等效于0

| 位数 | 含义       | 位数 | 含义   |
| ---- | ---------- | ---- | ------ |
| 1    | 红色       | 6    | 加粗   |
| 2    | 蓝色       | 7    | 斜体   |
| 3    | 绿色       | 8    | 删除线 |
| 4    | 橙（棕）色 |      |        |
| 5    | 银（灰）色 |      |        |

其中删除线可对应 CSS：` text-decoration:line-through`

## 主题和回复的状态的解析方法

原始数据来自主题或回复的`type`字段（整数）

步骤：

1. 将`type`字段转换为二进制字符串，并反转
2. 根据所在位是`0`或`1`表示某一属性值为`false`或`true`

属性值位置和含义对照：

部分参考自：https://img4.nga.178.com/common_res/js_postfunc_v2.js

| 位置 | 名称 | 含义 |
| ---- | ---- | ---- |
|0|评论|这是一条评论|
|1|隐藏|被隐藏|
|2|有评论|有评论|
|3|延时|是否有延时操作|
|4|更多|更多用户信息|
|5|被标记|是否被标记了|
|6|不再提示|不再提醒回复|
|7|编辑|编辑时间不受限制|
|8|自回|主题只能作者自己回复|
|9|审核中|正在人工审核..|
|10|锁定|不允许编辑和回复|
|11|处罚标记|是否显示被处罚的标记|
|12|翻译|有可以自动翻译的内容|
|13|附件|有上传文件|
|15|合集|这是一个合集入口|
|16|合集主题|这是一个合集内主题|
|17|合并版面|是否不在合并版面中显示|
|26|审核不通过|经过了人工审核，且被判定为不通过|
|27|未知|未知状态|

# API

- 所有表示`是否xxx`的参数，除非有特别说明，均为`1`表示`true`,`0`或不传表示`false`。
- 所有需要填写回复ID（PID）的地方，当同时传递了主题ID（TID）时，PID取0表示该主题的主楼。

## 静态资源

### 首页版面入口

直接请求：

```
https://img4.nga.178.com/proxy/cache_attach/bbs_index_data.js
```

去掉前缀之后解析为JSON即可

## thread.php

该接口的参数可以有多种组合，我们按照应用场合来对其进行组合

### 公共参数

- 所有请求中均可使用`page`参数指定页数，不指定时默认为`1`
- 所有`order_by`参数含义均为`排序方式`，可选值均为：`postdatedesc`(按发布时间) / `lastpostdesc`(按最后回复时间,缺省)

### 响应结构

该接口的响应数据结构是通用的，请首先参考[官方文档](https://bbs.nga.cn/read.php?pid=116169942)，这里仅作补充：

- 标题字段需要反转义
- `topic_misc_var`：字段`1`值为32时，表示本条为版面入口，此时字段`3`为版面id;；字段`1`值为33时，表示本条为合集入口，主题id(tid)即为合集id(stid)
- `sub_forums`：子版面信息，该字段为一个对象，`key`值如果为纯数字表示该子版面为一个独立板面，`key`为它的`fid`，如果为`t`开头表示为一个合集，之后的部分为合集主题的`tid`。`value`均为数组，其中下标为`3`的为该子版面在`635`版的镜像ID，这个ID后续会用到。

`todo`

### 查询指定收藏夹内的主题

| 参数名 | 含义     | 是否必须 | 示例值                       |
| ------ | -------- | -------- | ---------------------------- |
| favor  | 收藏夹id | ✓        | 1 (表示当前用户的默认收藏夹) |

收藏夹id可以由`nuke.php`接口的对应方法查询获得。

### 浏览合集主题

| 参数名   | 含义       | 是否必须 |
| -------- | ---------- | -------- |
| stid     | 合集主题id | ✓        |
| order_by | 排序方式   |          |

示例请求：https://bbs.nga.cn/thread.php?stid=29111018&__output=11

### 搜索合集主题

| 参数名    | 含义             | 是否必须 |
| --------- | ---------------- | -------- |
| key       | 关键字           | ✓        |
| stid      | 合集主题id       | ✓        |
| content   | 是否搜索主楼正文 |          |
| recommend | 是否只搜索精华帖 |          |

示例请求：https://bbs.nga.cn/thread.php?stid=29111018&recommend=1&key=%E5%BF%83%E6%99%BA&__output=11

### 浏览版面主题

| 参数名   | 含义     | 是否必须 |
| -------- | -------- | -------- |
| fid      | 版面id   | ✓        |
| order_by | 排序方式 |          |

示例请求：https://bbs.nga.cn/thread.php?fid=-547859&__output=11

### 搜索版面主题

| 参数名    | 含义                            | 是否必须 |
| --------- | ------------------------------- | -------- |
| key       | 关键字                          | ✓        |
| fid       | 版面id （可选多个，用逗号隔开） | ✓        |
| content   | 是否搜索主楼正文                |          |
| recommend | 是否只搜索精华帖                |          |

示例请求：https://bbs.nga.cn/thread.php?key=%E5%BF%83%E6%99%BA&fid=-547859,-60157311&__output=11

## read.php

### 响应结构

该接口的响应数据结构是通用的，请首先参考[官方文档](https://bbs.nga.cn/read.php?pid=118598780)，这里仅作补充：

- 匿名用户在回复中的 `authorid`为负数，在`__U`中下有对应的负数字段中 `username`字段为该匿名用户在该主题中的唯一标识（**注意 该负数不是唯一标识，每一页都可能不一样**）。
- 评论贴条的正文内容保存在被评论回复的 `comment` 字段中，其所在楼层无正文内容；热评内容保存在主楼的`hotreply`字段中，其所在楼层也有相同内容。
- `__F.custom_level`：本版面声望数值对应的声望等级。其值为以json字符串格式书写的一个数组。使用方法为：反向遍历该数组，当声望数值大于等于当前对象的 `r` 字段时，其 `n` 字段即为对应的声望等级。
- 标题、回复正文字段需要反转义
- `__U.用户id.reputation`：表示用户在多个版面的声望，格式为`声望id_声望值`，用逗号连接。
- `__U.用户id.avatar`：多个头像时会使用`|.a`分隔，前缀相同。
- `__U.用户id.yz`：用户的激活状态，已知的值为：`0`(未激活)，`1`(已激活)，`4`(已激活(手机/关联))，`-1`(NUKED)，`-5`(已注销)
- `__R.alterinfo`：改动信息，每组以中括号包裹，第一个字符标识了类型：`E`(编辑)、`A`(加分/扣分)、`L`(处罚)、`U`(取消操作)
- `__PAGE`：当前页
- `__ROWS`：楼层总数（含主楼）

`todo`

### 获取主题的某一页内容

| 参数名   | 含义                           | 是否必须                 |
| -------- | ------------------------------ | ------------------------ |
| tid      | 主题id                         | ✓                        |
| page     | 页数，缺省为1，传e表示最后一页 |                          |
| authorid | 作者uid                        | 如果传入表示`只看TA`功能 |

### 获取单一回复内容

| 参数名 | 含义   | 是否必须 |
| ------ | ------ | -------- |
| pid    | 回复id | ✓        |

### 网页解析

本接口可能会出现返回的`json`数据不完整的情况，此时需要放弃`__output`参数，添加`noBBCode`参数(无value)，直接获取`html`格式数据自行解析。

### 示例请求

- 热评、贴条：https://bbs.nga.cn/read.php?tid=25968165&__output=11
- 匿名用户：https://bbs.nga.cn/read.php?tid=25968165&page=3&__output=11
- 编辑、加分：https://bbs.nga.cn/read.php?tid=13055900&__output=11
- 积分、扣分、取消操作：https://bbs.nga.cn/read.php?tid=22885868&&__output=11
- 处罚：https://bbs.nga.cn/read.php?tid=26639977&__output=11

## forum.php

### 搜索版面/合集

| 参数名 | 含义   | 是否必须 |
| ------ | ------ | -------- |
| key    | 关键字 | ✓        |
| page   | 页数   |          |

- 版面图标的地址为：`https://img4.nga.178.com/proxy/cache_attach/ficon/{版面id}u.png`

## post.php

[官方文档](https://bbs.nga.cn/read.php?pid=118598798)

### 标准流程

发帖的标准流程为：

1. `(可选)`获取发布信息（准备）
2. `(可选)`上传附件
3. 正式发布

### 准备

必备参数：

| 参数名 | 含义     | 是否必须 | 备注                                                         |
| ------ | -------- | -------- | ------------------------------------------------------------ |
| action | 动作类型 | ✓        | 可选值：`new`(新主题)、`reply`(回复)、`quote`(引用)、`modify`(编辑) |

根据`action`的不同其他参数有不同

| 参数名  | 含义            | 对应action             | 是否必须 |
| ------- | --------------- | ---------------------- | -------- |
| fid     | 版面id          | new                    | ✓        |
| stid    | 合集id          | new                    |          |
| tid     | 主题id          | reply / quote / modify | ✓        |
| pid     | 回复id          | reply / quote / modify | ✓        |
| comment | 传1表示贴条评论 | reply                  |          |

### 上传附件

需要以`Form-Data`形式上传文件，仅对官方文档做少量补充：

- 模仿浏览器行为，添加字段`origin_domain=bbs.nga.cn`
- 添加字段`attachment_fileX_auto_size`(自动压缩图片)，当图片大小超过4M时需要将该项置为`1`，否则上传会报错，其中`X`需要与其他参数一致
- 水印参数还有一个"中间"选项(`cn`)

### 正式发布

需要在“准备”步骤的参数基础上增加如下参数，可以把前一步骤的参数在`QueryString`中传递，本步骤在`Form-Data`中传递：

| 参数名            | 含义                     | 是否必须 | 可选值    |
| ----------------- | ------------------------ | -------- | --------- |
| step              |                          |          | 固定为`2` |
| post_content      | 正文                     | ✓        |           |
| post_subject      | 标题                     |          |           |
| hidden            | 是否隐藏内容(版主可见)   |          |           |
| anony             | 是否匿名发布             |          |           |
| attachments       | 附件列表（见官方文档）   |          |           |
| attachments_check | 附件验证码（见官方文档） |          |           |

## nuke.php

### 删除附件

见[官方文档](https://bbs.nga.cn/read.php?pid=118598798)，其中`aid`指附件的文件名（url的最后一段）

### 子版面屏蔽操作

子版面的主题可能会在主版面混合显示，屏蔽后不再混合显示。

#### 公共参数

| 参数名 | 取值              |
| ------ | ----------------- |
| __lib  | user_option       |
| raw    | 3                 |
| type   | 1                 |
| info   | add_to_block_tids |
| fid    | 主版面id          |

#### 查询屏蔽情况

额外参数：

| 参数名 | 取值 |
| ------ | ---- |
| __act  | get  |

屏蔽情况在`block_tid`字段中

#### 添加屏蔽

额外参数：

| 参数名 | 取值                                |
| ------ | ----------------------------------- |
| __act  | set                                 |
| add    | 子版面的镜像id，或在主题列表中的tid |

#### 移除屏蔽

额外参数：

| 参数名 | 取值                                |
| ------ | ----------------------------------- |
| __act  | set                                 |
| del    | 子版面的镜像id，或在主题列表中的tid |

### 签到操作

#### 签到

| 参数名 | 取值     |
| ------ | -------- |
| __lib  | check_in |
| __act  | check_in |

#### 查询签到状态

| 参数名 | 取值     |
| ------ | -------- |
| __lib  | check_in |
| __act  | get_stat |

### 收藏夹操作

#### 查询

| 参数名 | 取值                                   |
| ------ | -------------------------------------- |
| __lib  | topic_favor_v2                         |
| __act  | list_folder                            |
| uid    | 留空表示自己，可以查询他人的公开收藏夹 |
| page   | 页数                                   |

#### 修改

注意：默认收藏夹被修改的话，将不再是默认收藏夹，系统会创建一个新的默认收藏夹。

| 参数名 | 取值               |
| ------ | ------------------ |
| __lib  | topic_favor_v2     |
| __act  | modify_folder      |
| name   | 名称               |
| opt    | 是否公开           |
| folder | 需要修改的收藏夹id |

### 收藏版面操作

#### 查询

| 参数名 | 取值         |
| ------ | ------------ |
| __lib  | forum_favor2 |
| __act  | forum_favor  |
| action | get          |

#### 修改

| 参数名     | 取值             |
| ---------- | ---------------- |
| __lib      | forum_favor2     |
| __act      | forum_favor      |
| action     | add 或 del       |
| fid / stid | 版面id 或 合集id |

### 收藏主题操作

#### 查询

见`thread.php`接口的操作

#### 添加

| 参数名 | 取值                           |
| ------ | ------------------------------ |
| __lib  | topic_favor_v2                 |
| __act  | add                            |
| action | add                            |
| folder | 收藏夹id，默认收藏夹填`1`      |
| tid    | 主题id                         |
| pid    | 如果要收藏的是回复，填写回复id |

#### 删除

| 参数名   | 取值                                                         |
| -------- | ------------------------------------------------------------ |
| __lib    | topic_favor                                                  |
| __act    | topic_favor                                                  |
| action   | del                                                          |
| raw      | 3                                                            |
| tid      | 主题id                                                       |
| page     | 要删除的条目在列表页面中的页码                               |
| tidarray | 要删除的条目id，如果是主题直接写`主题id`，如果是回复写`主题id_回复id`，多个用逗号隔开 |

### 任务操作

#### 查询任务列表

| 参数名    | 取值                               |
| --------- | ---------------------------------- |
| __lib     | mission                            |
| __act     | get                                |
| event     | 整数，目前1-4有返回值，1为签到任务 |
| type      | 2的0及以上次方，表示不同类型的任务 |
| available | 1                                  |

对于签到任务，event和type均传1即可，其他任务目前不知如何完成。

#### 检查签到任务

| 参数名 | 取值              |
| ------ | ----------------- |
| __lib  | mission           |
| __act  | checkin_count_add |
| mid    | 任务id            |

检查任务的时候默认会尝试`完成`和`提交`任务，如果成功`提交`则`查询任务列表`将不再显示该任务，如果增加一个参数`no_complete=1`则不会提交任务（依然会尝试完成，可能会改变任务状态，如完成时间等）

### 提醒消息操作

#### 查询

| 参数名     | 取值                                   |
| ---------- | -------------------------------------- |
| __lib      | noti                                   |
| __act      | get_all                                |
| raw        | 3                                      |
| time_limit | 时间戳，只返回时间戳大于该值的提醒消息 |

#### 清空

| 参数名 | 取值 |
| ------ | ---- |
| __lib  | noti |
| __act  | del  |
| raw    | 3    |

#### 开启或关闭对某一楼层的提醒消息

关闭提醒后，该回复的状态中将会出现`不再提示`状态

| 参数名  | 取值                   |
| ------- | ---------------------- |
| func    | noti_tag               |
| raw     | 3                      |
| tid     | 主题id                 |
| pid     | 回复id                 |
| no_hint | 开启 = `1`，关闭 = `0` |

### 私信操作

#### 公共参数

| 参数名 | 取值    |
| ------ | ------- |
| __lib  | message |
| __act  | message |

#### 查询列表

| 参数名 | 取值 |
| ------ | ---- |
| action | list |
| page   | 页数 |

#### 阅读私信内容

| 参数名 | 取值   |
| ------ | ------ |
| action | read   |
| mid    | 消息id |
| page   | 页数   |

#### 发起新的私信会话

本功能与`向私信会话中添加参与者`共享一天的CD

| 参数名  | 取值                        |
| ------- | --------------------------- |
| action  | new                         |
| subject | 标题                        |
| content | 正文                        |
| to      | 目标用户uid，多个用逗号分隔 |

#### 回复私信

| 参数名  | 取值   |
| ------- | ------ |
| action  | reply  |
| mid     | 消息id |
| subject | 标题   |
| content | 正文   |

#### 向私信会话中添加参与者

本功能与`发起新的私信会话`共享一天的CD

| 参数名 | 取值                        |
| ------ | --------------------------- |
| action | add                         |
| mid    | 消息id                      |
| to     | 目标用户uid，多个用逗号分隔 |

#### 从私信会话中踢出参与者

| 参数名 | 取值             |
| ------ | ---------------- |
| action | leave_topic      |
| mid    | 消息id           |
| luid   | 需要踢出的用户id |

### 私信黑名单操作

#### 查询

| 参数名 | 取值       |
| ------ | ---------- |
| action | list_block |

#### 添加

| 参数名 | 取值      |
| ------ | --------- |
| action | add_block |
| buids  | 用户id    |

#### 删除

| 参数名 | 取值      |
| ------ | --------- |
| action | del_block |
| buids  | 用户id    |

### 点赞、点踩

| 参数名 | 取值               |
| ------ | ------------------ |
| __lib  | topic_recommend    |
| __act  | add                |
| tid    | 主题id             |
| pid    | 回复id             |
| value  | 赞 = `1` 踩 = `-1` |

响应中将会返回本次操作后的总赞数变动数值，如从赞改踩的变动数值为`-2`

### 设置签名

推荐使用`Form-Data`传参

| 参数名 | 取值     |
| ------ | -------- |
| __lib  | set_sign |
| __act  | set      |
| raw    | 3        |
| uid    | 用户id   |
| sign   | 签名正文 |

### 查询版面的主题分类

| 参数名 | 取值      |
| ------ | --------- |
| __lib  | topic_key |
| __act  | get       |
| fid    | 版面id    |

### 查询用户信息

用户id和用户名二选一

| 参数名   | 取值   |
| -------- | ------ |
| __lib    | ucp    |
| __act    | get    |
| uid      | 用户id |
| username | 用户名 |

### 举报

| 参数名 | 取值     |
| ------ | -------- |
| __lib  | log_post |
| __act  | report   |
| tid    | 主题id   |
| pid    | 回复id   |